<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.3">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">import React, { useState, useEffect, useRef, useCallback } from 'react';</p>
<p class="p2"><br></p>
<p class="p1">// --- Audio Engine (Web Audio API) ---</p>
<p class="p1">const audioCtx = new (window.AudioContext || window.webkitAudioContext)();</p>
<p class="p2"><br></p>
<p class="p1">// Music State</p>
<p class="p1">let musicInterval = null;</p>
<p class="p1">let noteIndex = 0;</p>
<p class="p1">const musicNotes = [</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>261.63, 329.63, 392.00, 493.88, // C4, E4, G4, B4</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>523.25, 493.88, 392.00, 329.63, // C5, B4, G4, E4</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>293.66, 349.23, 440.00, 523.25, // D4, F4, A4, C5 (Dm7)</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>587.33, 523.25, 440.00, 349.23<span class="Apple-converted-space">Â  </span>// D5, C5, A4, F4</p>
<p class="p1">];</p>
<p class="p2"><br></p>
<p class="p1">const playMusicNote = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>if (audioCtx.state === 'suspended') audioCtx.resume();</p>
<p class="p2"><span class="Apple-converted-space">Â Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const osc = audioCtx.createOscillator();</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const gainNode = audioCtx.createGain();</p>
<p class="p2"><span class="Apple-converted-space">Â Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>osc.connect(gainNode);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>gainNode.connect(audioCtx.destination);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const now = audioCtx.currentTime;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const freq = musicNotes[noteIndex];</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>noteIndex = (noteIndex + 1) % musicNotes.length;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>osc.type = 'triangle'; // Softer 8-bit sound</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>osc.frequency.setValueAtTime(freq, now);</p>
<p class="p2"><span class="Apple-converted-space">Â Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>// Envelope for relaxing feel</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>gainNode.gain.setValueAtTime(0, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>gainNode.gain.linearRampToValueAtTime(0.03, now + 0.1); // Low volume</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>gainNode.gain.exponentialRampToValueAtTime(0.001, now + 1.5);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>osc.start(now);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>osc.stop(now + 1.5);</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const toggleMusic = (shouldPlay) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>if (shouldPlay) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if (!musicInterval) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>// Play a note every 600ms</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>musicInterval = setInterval(playMusicNote, 600);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if (musicInterval) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>clearInterval(musicInterval);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>musicInterval = null;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>}</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const playSound = (type) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>if (audioCtx.state === 'suspended') audioCtx.resume();</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const osc = audioCtx.createOscillator();</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const gainNode = audioCtx.createGain();</p>
<p class="p2"><span class="Apple-converted-space">Â Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>osc.connect(gainNode);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>gainNode.connect(audioCtx.destination);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const now = audioCtx.currentTime;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>switch (type) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>case 'pop':</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.type = 'sine';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.setValueAtTime(800, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.exponentialRampToValueAtTime(100, now + 0.1);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.setValueAtTime(0.1, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.1);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.start(now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.stop(now + 0.1);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>break;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>case 'blip':<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.type = 'triangle';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.setValueAtTime(600, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.linearRampToValueAtTime(800, now + 0.05);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.setValueAtTime(0.05, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.linearRampToValueAtTime(0, now + 0.05);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.start(now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.stop(now + 0.05);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>break;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>case 'zap':</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.type = 'sawtooth';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.setValueAtTime(500, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.linearRampToValueAtTime(100, now + 0.2);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.setValueAtTime(0.2, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.2);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.start(now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.stop(now + 0.2);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>break;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>case 'rub':</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const bufferSize = audioCtx.sampleRate * 0.1;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const data = buffer.getChannelData(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>for (let i = 0; i &lt; bufferSize; i++) data[i] = Math.random() * 2 - 1;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const noise = audioCtx.createBufferSource();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>noise.buffer = buffer;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const noiseGain = audioCtx.createGain();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>noiseGain.gain.setValueAtTime(0.05, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>noiseGain.gain.linearRampToValueAtTime(0, now + 0.1);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>noise.connect(noiseGain);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>noiseGain.connect(audioCtx.destination);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>noise.start(now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>break;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>case 'roll':<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.type = 'square';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.setValueAtTime(100, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.exponentialRampToValueAtTime(50, now + 0.15);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.setValueAtTime(0.05, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.linearRampToValueAtTime(0, now + 0.15);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.start(now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.stop(now + 0.15);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>break;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>case 'swish':<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.type = 'sine';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.setValueAtTime(200, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.linearRampToValueAtTime(600, now + 0.2);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.setValueAtTime(0.02, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.linearRampToValueAtTime(0, now + 0.2);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.start(now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.stop(now + 0.2);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>break;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>case 'success':</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.type = 'sine';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.setValueAtTime(440, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.setValueAtTime(554, now + 0.1); // C#</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.setValueAtTime(659, now + 0.2); // E</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.setValueAtTime(0.1, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.linearRampToValueAtTime(0, now + 0.4);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.start(now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.stop(now + 0.4);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>break;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>case 'fail':</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.type = 'square';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.setValueAtTime(150, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.frequency.linearRampToValueAtTime(100, now + 0.3);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.setValueAtTime(0.1, now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>gainNode.gain.linearRampToValueAtTime(0, now + 0.3);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.start(now);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>osc.stop(now + 0.3);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>break;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>default:</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>break;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>}</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">// --- Global Styles ---</p>
<p class="p1">const GlobalStyles = () =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>{`</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>@import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&amp;display=swap');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>body { font-family: 'Comic Neue', 'Comic Sans MS', sans-serif; background-color: #f0f9ff; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>.sim-container { touch-action: none; }</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>@keyframes float {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>0% { transform: translateY(0px); }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>50% { transform: translateY(-6px); }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>100% { transform: translateY(0px); }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>.floating { animation: float 3s ease-in-out infinite; }</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>.particle { transition: all 0.5s ease-out; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>.animate-spin-slow { animation: spin 10s linear infinite; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>/* Physics &amp; Interaction Classes */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>.draggable { cursor: grab; touch-action: none; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>.draggable:active { cursor: grabbing; }</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>.no-lag { transition: none; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>.smooth-catchup { transition: transform 0.2s cubic-bezier(0.2, 0.8, 0.2, 1); }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>.flying-electron {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>animation: flyToTarget 0.6s ease-out forwards;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>@keyframes flyToTarget {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>0% { transform: translate(0, 0) scale(1); opacity: 1; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>100% { transform: translate(var(--tx), var(--ty)) scale(0.5); opacity: 0; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>.speech-bubble::before {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>content: '';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>left: -12px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>top: 24px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>border-top: 10px solid transparent;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>border-bottom: 10px solid transparent;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>border-right: 12px solid #FCD34D;<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>@keyframes pointMove {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>0% { transform: translateX(0); opacity: 0.5; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>50% { transform: translateX(10px); opacity: 1; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>100% { transform: translateX(0); opacity: 0.5; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>.arrow-anim { animation: pointMove 1.5s infinite; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>`}</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;/style&gt;</p>
<p class="p1">);</p>
<p class="p2"><br></p>
<p class="p1">// --- Shared Components ---</p>
<p class="p2"><br></p>
<p class="p1">const Button = ({ onClick, children, disabled, className = "" }) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;button<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>onClick={(e) =&gt; { playSound('pop'); onClick(e); }}<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>disabled={disabled}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>className={`px-6 py-2 rounded-full font-bold shadow-lg transform transition active:scale-95 ${disabled ? 'bg-gray-300 cursor-not-allowed' : 'bg-blue-500 hover:bg-blue-400 text-white'} ${className}`}</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>{children}</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;/button&gt;</p>
<p class="p1">);</p>
<p class="p2"><br></p>
<p class="p1">// --- Sparkle Character Component ---</p>
<p class="p1">const Sparkle = ({ message, emotion = 'happy', speak = true }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [isSpeaking, setIsSpeaking] = useState(false);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if (!speak) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>window.speechSynthesis.cancel();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>return;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>window.speechSynthesis.cancel();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// Sanitize text</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const spokenText = message.replace(/\s?\(?[+-]\)?/g, '').replace(/\s?\(0\)/g, '');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const utterance = new SpeechSynthesisUtterance(spokenText);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>utterance.lang = 'en-US';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// Female voice adjustments</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>utterance.pitch = 1.2;<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>utterance.rate = 1.0;<span class="Apple-converted-space">Â </span></p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const voices = window.speechSynthesis.getVoices();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const preferredVoice = voices.find(v =&gt;<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>v.name.includes('Google US English') ||<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>v.name.includes('Zira') ||<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>v.name.includes('Samantha') ||</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>v.name.includes('Female')</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>) || voices[0];</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if (preferredVoice) utterance.voice = preferredVoice;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>utterance.onstart = () =&gt; setIsSpeaking(true);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>utterance.onend = () =&gt; setIsSpeaking(false);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>window.speechSynthesis.speak(utterance);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>return () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>window.speechSynthesis.cancel();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>};</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>}, [message, speak]);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div className="flex items-start gap-4 mb-6 w-full max-w-4xl animate-fadeIn z-50 relative"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;div className="flex-shrink-0 flex flex-col items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{/* Sparkle Container */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="text-8xl relative floating"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>{/* Face - Static */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;span<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>role="img"<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>aria-label="Sparkle"<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>className="inline-block origin-bottom"</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>style={{ filter: emotion === 'shocked' ? 'invert(1)' : 'none' }}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{emotion === 'shocked' ? 'ðŸ˜²' : 'ðŸ‘©'}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/span&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>{/* Antenna/Spark */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div className="absolute -top-2 -right-4 text-5xl text-yellow-600 font-bold z-20 drop-shadow-md"&gt;âš¡&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>{/* Speaking Indicator (Subtle pulse at bottom) */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>{isSpeaking &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute bottom-0 left-1/2 -translate-x-1/2 w-full h-1 bg-yellow-400/50 blur-sm animate-pulse"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="font-bold text-purple-800 mt-2 bg-purple-200 px-3 py-0.5 rounded-full text-sm border border-purple-400 shadow-sm"&gt;Sparkle&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;div className="bg-white border-l-8 border-yellow-300 p-5 rounded-r-xl rounded-bl-xl shadow-md flex-grow relative speech-bubble mt-4 transition-all"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;p className="text-gray-800 font-medium leading-relaxed text-lg"&gt;{message}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>);</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">const GuideArrow = ({ text, className = "", direction = "right" }) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;div className={`absolute pointer-events-none z-40 flex items-center ${className} ${direction === "left" ? "flex-row-reverse" : ""}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;span className="bg-white/90 px-2 py-1 rounded text-xs font-bold text-blue-600 shadow-sm whitespace-nowrap"&gt;{text}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div className={`text-4xl text-blue-500 font-bold arrow-anim ${direction === "left" ? "rotate-180" : ""}`}&gt;&amp;rarr;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;/div&gt;</p>
<p class="p1">);</p>
<p class="p2"><br></p>
<p class="p1">// --- STAGE 1: Atom Builder ---</p>
<p class="p1">const AtomBuilder = ({ onComplete, settings }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [protons, setProtons] = useState(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [neutrons, setNeutrons] = useState(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [electrons, setElectrons] = useState(0);</p>
<p class="p2"><span class="Apple-converted-space">Â Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const isComplete = protons === 3 &amp;&amp; neutrons === 4 &amp;&amp; electrons === 3;</p>
<p class="p2"><span class="Apple-converted-space">Â Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const getMessage = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>if (isComplete) return "Perfect! That's a stable Lithium atom. See how the Protons and Neutrons clump in the middle?";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>if (protons &gt; 3) return "Whoa! Too many protons. The nucleus is unstable!";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>return "Let's build a Lithium atom! I need 3 Protons (+), 4 Neutrons (0), and 3 Electrons (-).";</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const getPos = (index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const angle = index * 2.39996;<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const r = 12 * Math.sqrt(index);<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>return { x: r * Math.cos(angle), y: r * Math.sin(angle) };</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div className="flex flex-col items-center w-full max-w-4xl mx-auto p-4 animate-fadeIn"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;h2 className="text-2xl font-bold mb-4 text-purple-600"&gt;Step 1: Inside the Atom&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;Sparkle message={getMessage()} emotion={isComplete ? 'excited' : 'happy'} speak={settings.speak} /&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;div className="relative w-80 h-80 md:w-96 md:h-96 bg-gray-900 rounded-full flex items-center justify-center mb-6 overflow-hidden ring-4 ring-gray-200 shadow-xl"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="absolute w-64 h-64 border-2 border-dashed border-gray-600 rounded-full animate-spin-slow" style={{animationDuration: '10s'}}&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="absolute w-48 h-48 border-2 border-dashed border-gray-600 rounded-full animate-spin-slow" style={{animationDuration: '5s'}}&gt;&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="absolute w-24 h-24 flex items-center justify-center z-10 transition-all duration-300"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>{Array.from({ length: protons }).map((_, i) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const pos = getPos(i);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={`p-${i}`} className="absolute w-5 h-5 bg-red-500 rounded-full shadow-sm border border-red-300 flex items-center justify-center text-[8px] text-white font-bold transition-all duration-500"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{ transform: `translate(${pos.x}px, ${pos.y}px)` }}&gt;+&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>})}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>{Array.from({ length: neutrons }).map((_, i) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const pos = getPos(protons + i);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={`n-${i}`} className="absolute w-5 h-5 bg-gray-400 rounded-full shadow-sm border border-gray-300 transition-all duration-500"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{ transform: `translate(${pos.x}px, ${pos.y}px)` }}&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>})}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{Array.from({ length: electrons }).map((_, i) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const angle = (i / electrons) * 2 * Math.PI;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const radius = 100 + (i % 2) * 30;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const x = Math.cos(angle) * radius;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const y = Math.sin(angle) * radius;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div key={`e-${i}`} className="absolute w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center font-bold text-xs shadow-glow transition-all duration-500"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{ transform: `translate(${x}px, ${y}px)` }}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>-</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>})}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;div className="grid grid-cols-3 gap-4 mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{[{l:'Protons (+)', c:protons, s:setProtons, col:'red'}, {l:'Neutrons (0)', c:neutrons, s:setNeutrons, col:'gray'}, {l:'Electrons (-)', c:electrons, s:setElectrons, col:'yellow'}].map((item, idx) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  </span>&lt;div key={idx} className="flex flex-col items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>&lt;span className={`font-bold text-${item.col}-600 mb-1`}&gt;{item.l}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex gap-2 items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; { if(settings.sound) playSound('blip'); item.s(Math.max(0, item.c - 1)); }} className={`px-2 py-1 bg-${item.col}-200 text-black hover:bg-${item.col}-300`}&gt;-&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  </span>&lt;span className="text-xl font-mono w-6 text-center"&gt;{item.c}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; { if(settings.sound) playSound('blip'); item.s(item.c + 1); }} className={`px-2 py-1 bg-${item.col}-500 hover:bg-${item.col}-600`}&gt;+&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>{isComplete &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="mt-6 animate-bounce"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;Button onClick={onComplete} className="bg-green-500 hover:bg-green-600 text-xl px-8 py-3"&gt;Next Lab &amp;rarr;&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>);</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">// --- STAGE 2: Electron Shells ---</p>
<p class="p1">const ElectronShellLevel = ({ onComplete, settings }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [knocked, setKnocked] = useState(false);</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="flex flex-col items-center w-full max-w-4xl mx-auto p-4 animate-fadeIn"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;h2 className="text-2xl font-bold mb-4 text-purple-600"&gt;Step 2: Why do they move?&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;Sparkle<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>message={knocked ? "See that? The nucleus is safe deep inside, but that outer electron is loose and ready to fly!" : "The Nucleus is protected deep inside. But look at the Outside Shell... tap that electron!"}<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>emotion={knocked ? 'excited' : 'happy'}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>speak={settings.speak}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>/&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="relative w-full h-80 bg-gray-900 rounded-xl flex items-center justify-center overflow-hidden border-4 border-gray-700"&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{!knocked &amp;&amp; &lt;GuideArrow text="Tap the Electron!" className="top-1/3 right-1/3" direction="left" /&gt;}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Fixed Container for precise alignment */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="relative w-64 h-64 flex items-center justify-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Nucleus (Safe) */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute w-32 h-32 bg-gray-800 rounded-full flex items-center justify-center z-10 border-4 border-gray-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-white text-center text-xs"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="font-bold text-red-400"&gt;Protons&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="font-bold text-gray-400"&gt;Neutrons&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-[10px] mt-1"&gt;(Stuck inside)&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Shell */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute inset-0 border-2 border-dashed border-gray-500 rounded-full"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Target Electron - Aligned to right edge of shell */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>onClick={() =&gt; { setKnocked(true); if(settings.sound) playSound('zap'); }}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>className={`absolute w-12 h-12 rounded-full bg-yellow-400 flex items-center justify-center font-bold text-black shadow-[0_0_15px_rgba(250,204,21,0.6)] hover:scale-110 transition-transform z-20</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${knocked ? 'flying-electron' : 'animate-bounce'}`}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>top: '50%',</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>right: '-1.5rem',</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>marginTop: '-1.5rem',</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>'--tx': '200px', '--ty': '-200px'</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>-</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Moved Label Down */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute top-[65%] right-[-5rem] text-gray-400 text-sm w-20 text-left"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>Outer Shell</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="mt-6 text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{knocked &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={onComplete} className="bg-green-500 hover:bg-green-600 text-xl px-8 py-3"&gt;Got it! Next &amp;rarr;&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>);</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">// --- STAGE 3: The Rules of Attraction ---</p>
<p class="p1">const ChargesLevel = ({ onComplete, settings }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [chargeL, setChargeL] = useState('pos'); // 'pos' or 'neg'</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [chargeR, setChargeR] = useState('pos');</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [animating, setAnimating] = useState(false);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [tested, setTested] = useState(false);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const isAttract = chargeL !== chargeR;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const isRepel = chargeL === chargeR;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const handleTest = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>setAnimating(true);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if(settings.sound) playSound(isAttract ? 'swish' : 'zap');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setAnimating(false);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setTested(true);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}, 1000);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const reset = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>setTested(false);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>setAnimating(false);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>reset();</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>}, [chargeL, chargeR]);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;div className="flex flex-col items-center w-full max-w-4xl mx-auto p-4 animate-fadeIn"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;h2 className="text-2xl font-bold mb-4 text-purple-600"&gt;Step 3: The Rules of Attraction&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;Sparkle</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>message={tested</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>? (isAttract ? "Opposites Attract! They pull together like best friends." : "Like charges Repel! They push away because they are too similar.")</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>: "Change the charges to see what happens. Do opposites attract or repel?"}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>speak={settings.speak}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>/&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div className="relative w-full h-64 bg-gray-100 rounded-xl border-2 border-gray-300 flex items-center justify-center gap-20 overflow-hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>{/* Left Charge */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className={`w-20 h-20 rounded-full flex items-center justify-center text-4xl font-bold text-white shadow-xl transition-all duration-700</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${chargeL === 'pos' ? 'bg-red-500' : 'bg-yellow-400 text-black'}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${(animating || tested) &amp;&amp; isAttract ? 'translate-x-[60px]' : ''}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${(animating || tested) &amp;&amp; isRepel ? '-translate-x-[60px]' : ''}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{chargeL === 'pos' ? '+' : '-'}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>{/* Force Indicators */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex flex-col items-center justify-center h-full w-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{tested &amp;&amp; isAttract &amp;&amp; &lt;div className="text-4xl font-bold text-green-500 animate-pulse"&gt;â†’ â†&lt;/div&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{tested &amp;&amp; isRepel &amp;&amp; &lt;div className="text-4xl font-bold text-red-500 animate-pulse"&gt;â† â†’&lt;/div&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>{/* Right Charge */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className={`w-20 h-20 rounded-full flex items-center justify-center text-4xl font-bold text-white shadow-xl transition-all duration-700</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${chargeR === 'pos' ? 'bg-red-500' : 'bg-yellow-400 text-black'}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${(animating || tested) &amp;&amp; isAttract ? '-translate-x-[60px]' : ''}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${(animating || tested) &amp;&amp; isRepel ? 'translate-x-[60px]' : ''}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{chargeR === 'pos' ? '+' : '-'}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>{/* Controls */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between w-full max-w-md mt-6 gap-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex gap-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; setChargeL('pos')} disabled={chargeL === 'pos'} className={chargeL === 'pos' ? 'ring-2 ring-offset-2 ring-red-500' : 'opacity-50'}&gt;+&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; setChargeL('neg')} disabled={chargeL === 'neg'} className={chargeL === 'neg' ? 'ring-2 ring-offset-2 ring-yellow-400' : 'opacity-50'}&gt;-&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={handleTest} className="bg-purple-600 hover:bg-purple-700 w-32"&gt;Test!&lt;/Button&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex gap-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; setChargeR('pos')} disabled={chargeR === 'pos'} className={chargeR === 'pos' ? 'ring-2 ring-offset-2 ring-red-500' : 'opacity-50'}&gt;+&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; setChargeR('neg')} disabled={chargeR === 'neg'} className={chargeR === 'neg' ? 'ring-2 ring-offset-2 ring-yellow-400' : 'opacity-50'}&gt;-&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div className="mt-8 h-12"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>{tested &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={onComplete} className="bg-green-500 hover:bg-green-600 text-xl px-8 py-3"&gt;Got it! Next &amp;rarr;&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>)</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">// --- STAGE 4: Comb &amp; Hair ---</p>
<p class="p1">const CombLab = ({ onComplete, settings }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [charge, setCharge] = useState(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [flyingElectrons, setFlyingElectrons] = useState([]);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [combPos, setCombPos] = useState({ x: 30, y: 10 }); // Percent</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const handleMove = (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const rect = e.currentTarget.getBoundingClientRect();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const x = ((e.clientX - rect.left) / rect.width) * 100;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const y = ((e.clientY - rect.top) / rect.height) * 100;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>setCombPos({ x: Math.min(90, Math.max(10, x)), y: Math.min(80, Math.max(5, y)) });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if (y &gt; 50 &amp;&amp; x &gt; 20 &amp;&amp; x &lt; 80) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (charge &lt; 12 &amp;&amp; Math.random() &gt; 0.85) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(settings.sound) playSound('rub');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const id = Date.now();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setFlyingElectrons(prev =&gt; [...prev, { id, x: Math.random() * 50, y: Math.random() * 20 }]);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>setCharge(c =&gt; c + 1);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>setFlyingElectrons(prev =&gt; prev.filter(e =&gt; e.id !== id));</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}, 600);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div className="flex flex-col items-center w-full max-w-4xl mx-auto p-4 animate-fadeIn"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;h2 className="text-2xl font-bold mb-4 text-purple-600"&gt;Step 4: The Comb &amp; Hair&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;Sparkle message="Time to steal some electrons! Rub the plastic comb on the hair. The friction will knock those outer electrons right onto the comb!" speak={settings.speak} /&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="relative w-full h-80 bg-pink-50 rounded-xl border-2 border-pink-200 overflow-hidden select-none touch-none cursor-none"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>onMouseMove={handleMove}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>onTouchMove={(e) =&gt; handleMove(e.touches[0])}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{charge &lt; 3 &amp;&amp; &lt;GuideArrow text="Rub here!" className="bottom-20 left-1/2 -translate-x-1/2" direction="down" /&gt;}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{/* Hair Patch - Longer Strands &amp; Taller Area */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute bottom-[-15px] left-1/4 w-1/2 h-64 bg-transparent rounded-t-full relative overflow-visible pointer-events-none"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{Array.from({length: 30}).map((_,i) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={i} className="absolute bottom-0 w-1 bg-yellow-800 origin-bottom" style={{height: `${120 + Math.random()*80}%`, left: `${i*3.5}%`, transform: `rotate(${(i-15)*2.5}deg)`}}&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Scalp base */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute bottom-0 w-full h-20 bg-yellow-900 rounded-t-full"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white font-bold opacity-50"&gt;HAIR&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{/* Comb */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute w-64 h-24 bg-purple-600 rounded-lg transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center justify-center z-20 shadow-xl pointer-events-none"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{ left: `${combPos.x}%`, top: `${combPos.y}%` }}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-full h-4 bg-purple-700 mt-auto flex justify-around"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{Array.from({length:15}).map((_,i) =&gt; &lt;div key={i} className="w-1 h-8 bg-purple-600"&gt;&lt;/div&gt;)}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute top-2 text-white font-bold opacity-80"&gt;PLASTIC COMB&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute top-0 right-0 flex flex-wrap w-full h-full p-2 gap-1 justify-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{Array.from({length: charge}).map((_, i) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={`c-${i}`} className="w-4 h-4 bg-yellow-300 rounded-full text-[10px] flex items-center justify-center font-bold animate-pulse"&gt;-&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{flyingElectrons.map(e =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={e.id} className="absolute bottom-20 left-1/2 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center font-bold z-30 flying-electron"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{ '--tx': '0px', '--ty': '-150px' }}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>-</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="mt-4 text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;p className="text-lg"&gt;Electrons Stolen: &lt;span className="font-bold text-xl"&gt;{charge} / 12&lt;/span&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{charge &gt;= 12 &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>&lt;div className="mt-6 animate-bounce"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={onComplete} className="bg-green-500 hover:bg-green-600 text-xl px-8 py-3"&gt;Next: Balloon Lab &amp;rarr;&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>);</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">// --- STAGE 5: Balloon Experiment Hub ---</p>
<p class="p1">const BalloonLab = ({ onComplete, settings }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [subStage, setSubStage] = useState('charge');<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [charge, setCharge] = useState(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [flying, setFlying] = useState([]);</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [papers, setPapers] = useState(Array.from({length: 12}).map((_,i) =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>id:i,<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>initialX: 20 + i*6,<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>clumpOffset: (Math.random() * 10) - 5,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>lifted: false</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>})));</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [canX, setCanX] = useState(20);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [balloonPos, setBalloonPos] = useState({ x: 80, y: 30 });<span class="Apple-converted-space">Â </span></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const handleInteraction = (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const rect = e.currentTarget.getBoundingClientRect();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const clientX = e.touches ? e.touches[0].clientX : e.clientX;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const clientY = e.touches ? e.touches[0].clientY : e.clientY;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const x = ((clientX - rect.left) / rect.width) * 100;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const y = ((clientY - rect.top) / rect.height) * 100;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setBalloonPos({ x, y });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (subStage === 'charge') {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (x &gt; 60 &amp;&amp; y &gt; 60) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (charge &lt; 15 &amp;&amp; Math.random() &gt; 0.8) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if(settings.sound) playSound('rub');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const id = Date.now();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setFlying(prev =&gt; [...prev, {id}]);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setCharge(c =&gt; c + 1);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setFlying(prev =&gt; prev.filter(x =&gt; x.id !== id));</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}, 500);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else if (subStage === 'paper') {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setPapers(prev =&gt; prev.map(p =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const dist = Math.abs(p.initialX - x);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const isClose = dist &lt; 20 &amp;&amp; y &gt; 50;<span class="Apple-converted-space">Â </span></p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (charge &gt; 5 &amp;&amp; isClose &amp;&amp; !p.lifted) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if(settings.sound &amp;&amp; Math.random() &gt; 0.8) playSound('swish');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return {...p, lifted: true};</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if ((dist &gt; 25 || y &lt; 40) &amp;&amp; p.lifted) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return {...p, lifted: false};</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>return p;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}));</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else if (subStage === 'can') {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const dist = x - canX;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (charge &gt; 5 &amp;&amp; Math.abs(dist) &lt; 35 &amp;&amp; Math.abs(dist) &gt; 5 &amp;&amp; y &gt; 50) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>setCanX(prev =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const next = prev + (dist &gt; 0 ? 0.8 : -0.8);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if(settings.sound &amp;&amp; Math.random() &gt; 0.9) playSound('roll');<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return next;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>});</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const getSparkleMsg = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>switch(subStage) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>case 'charge': return "First things first! Rub the balloon on the sweater to load it up with negative electrons.";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>case 'paper': return "Now that the balloon is charged, lower it over the paper. The negative balloon pushes the paper's electrons away, making the top positive. Opposites attract!";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>case 'can': return "Aluminum cans are neutral, but the balloon can still pull it! Guide the can across the table.";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>case 'wall': return "The classic trick! Stick the balloon to the wall. The balloon pushes the wall's electrons deeper, sticking to the positive surface left behind.";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>default: return "";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="flex flex-col items-center w-full max-w-4xl mx-auto p-4 animate-fadeIn"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-full flex flex-col md:flex-row gap-4 mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Sparkle message={getSparkleMsg()} speak={settings.speak} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Microscope View Panel - Visible only in Paper &amp; Can Stages */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{(subStage === 'paper' || subStage === 'can') &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-full md:w-64 bg-blue-50 rounded-xl border-4 border-blue-200 p-3 shadow-inner flex flex-col animate-fadeIn shrink-0 h-64 md:h-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h4 className="font-bold text-blue-800 text-center mb-2 border-b border-blue-200 pb-1"&gt;Microscope View ðŸ”¬&lt;/h4&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Visualization Container */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex-grow relative bg-white rounded-lg border border-gray-300 overflow-hidden flex flex-col"&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Balloon Surface (Top) */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="h-1/3 bg-purple-500 w-full flex items-center justify-center gap-1 text-white font-bold text-sm shadow-md z-10 transition-all duration-300"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{ transform: `translateY(${ (1 - (subStage === 'paper' ? (balloonPos.y &gt; 50 ? 1 : 0) : (Math.abs(balloonPos.x - canX) &lt; 40 ? 1 : 0))) * -10 }px)` }}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Show negative charges if charged */}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{charge &gt; 0 ? Array.from({length: 5}).map((_, i) =&gt; &lt;div key={i}&gt;-&lt;/div&gt;) : &lt;span className="opacity-70 text-xs"&gt;Neutral&lt;/span&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Field Area */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex-grow relative flex justify-center items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{charge &gt; 5 &amp;&amp; (subStage === 'paper' ? balloonPos.y &gt; 50 : Math.abs(balloonPos.x - canX) &lt; 40) &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-yellow-500 text-xs font-bold animate-pulse rotate-90"&gt;REPULSION &amp;rarr;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Object Surface (Bottom) */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="h-1/2 bg-gray-100 w-full border-t-2 border-gray-300 relative p-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute -top-4 left-1 bg-white px-1 text-[10px] text-gray-500 font-bold border border-gray-200 rounded"&gt;{subStage === 'paper' ? 'Paper' : 'Aluminum Can'}&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="grid grid-cols-4 gap-1 h-full content-center place-items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{Array.from({length: 8}).map((_, i) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={i} className="relative w-4 h-4 flex justify-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Proton (Fixed) */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-white text-[8px] font-bold z-10 shadow-sm"&gt;+&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Electron logic */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute w-3 h-3 bg-yellow-400 rounded-full flex items-center justify-center text-[8px] font-bold transition-all duration-500 ease-out z-20 shadow-sm border border-yellow-600"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>top: (charge &gt; 5 &amp;&amp; (subStage === 'paper' ? balloonPos.y &gt; 50 : Math.abs(balloonPos.x - canX) &lt; 40)) ? '180%' : '20%',<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>opacity: 1<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>-</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Surface Charge Indicator */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className={`absolute top-0 right-1 text-[8px] font-bold text-red-500 transition-opacity duration-300 ${(charge &gt; 5 &amp;&amp; (subStage === 'paper' ? balloonPos.y &gt; 50 : Math.abs(balloonPos.x - canX) &lt; 40)) ? 'opacity-100' : 'opacity-0'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>+ Surface</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p className="text-[10px] text-center mt-2 text-gray-600 leading-tight"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{subStage === 'paper'<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>? "Negative balloon pushes paper's electrons deep inside!"<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>: "Metal electrons run away fast! Positive surface pulls the can."}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex gap-2 mb-4 overflow-x-auto w-full justify-center pb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; setSubStage('charge')} disabled={subStage === 'charge'} className="text-sm"&gt;1. Charge It&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; setSubStage('paper')} disabled={charge &lt; 5} className="text-sm"&gt;{charge &lt; 5 ? "ðŸ”’ " : ""}2. Paper Bits&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; setSubStage('can')} disabled={charge &lt; 5} className="text-sm"&gt;{charge &lt; 5 ? "ðŸ”’ " : ""}3. Soda Can&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; setSubStage('wall')} disabled={charge &lt; 5} className="text-sm"&gt;{charge &lt; 5 ? "ðŸ”’ " : ""}4. Wall Stick&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="relative w-full h-96 bg-blue-50 rounded-xl border-2 border-blue-200 overflow-hidden select-none touch-none cursor-none"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>onMouseMove={handleInteraction}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>onTouchMove={handleInteraction}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{subStage === 'charge' &amp;&amp; charge &lt; 5 &amp;&amp; &lt;GuideArrow text="Rub here!" className="bottom-20 right-20" direction="down" /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{subStage === 'paper' &amp;&amp; &lt;GuideArrow text="Move Down" className="bottom-40 left-1/2 -translate-x-1/2" direction="down" /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{subStage === 'can' &amp;&amp; &lt;GuideArrow text="Lead the Can" className="bottom-40 left-1/4" direction="right" /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{subStage === 'wall' &amp;&amp; &lt;GuideArrow text="Go to Wall" className="top-1/2 right-40" direction="right" /&gt;}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{subStage === 'charge' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute bottom-0 right-10 w-48 h-48 bg-orange-200 rounded-t-3xl flex flex-wrap content-start p-4 gap-2 opacity-90"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span className="absolute -top-8 font-bold text-orange-800"&gt;Sweater&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{Array.from({length: 8}).map((_, i) =&gt; &lt;div key={`sp-${i}`} className="w-4 h-4 rounded-full bg-red-400 flex items-center justify-center text-[10px] text-white font-bold"&gt;+&lt;/div&gt;)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{Array.from({length: 15 - charge}).map((_, i) =&gt; &lt;div key={`se-${i}`} className="w-4 h-4 rounded-full bg-yellow-400 flex items-center justify-center text-[10px] font-bold"&gt;-&lt;/div&gt;)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{flying.map(f =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={f.id} className="absolute bottom-20 right-20 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center font-bold z-30 flying-electron"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{ '--tx': '-100px', '--ty': '-100px' }}&gt;-&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{subStage === 'paper' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute bottom-0 w-full h-20 bg-gray-200 border-t-2 border-gray-300"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{papers.map(p =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={p.id} className="absolute w-5 h-5 bg-white shadow-sm border border-gray-300 transition-all duration-300 ease-out flex flex-col items-center justify-center"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>left: p.lifted ? `${balloonPos.x + p.clumpOffset}%` : `${p.initialX}%`,<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>bottom: p.lifted ? `${Math.max(10, (100 - balloonPos.y) - 5)}%` : '10%',</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>transform: `rotate(${p.id * 20}deg)`</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{/* Added charges */}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span className="text-[6px] font-bold text-red-500 leading-none select-none"&gt;+&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span className="text-[6px] font-bold text-blue-500 leading-none select-none"&gt;-&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{subStage === 'can' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute bottom-10 w-16 h-24 bg-gradient-to-r from-gray-300 via-gray-100 to-gray-400 border border-gray-500 rounded-lg flex items-center justify-center smooth-catchup"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{ left: `${canX}%`, transform: `translateX(-50%) rotate(${canX * 10}deg)` }}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-xs font-bold text-gray-500 rotate-90"&gt;SODA&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{subStage === 'wall' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute right-0 h-full w-32 bg-yellow-100 border-l-4 border-yellow-200 flex flex-col justify-around p-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{Array.from({length:5}).map((_,i) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={i} className="flex gap-2 items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-6 h-6 bg-red-400 rounded-full flex items-center justify-center text-white text-xs"&gt;+&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center text-xs transition-transform duration-300"</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{ transform: balloonPos.x &gt; 80 ? 'translateX(20px)' : 'translateX(0)' }}&gt;-&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute w-32 h-40 bg-purple-500 rounded-[50%_50%_50%_50%/40%_40%_60%_60%] shadow-xl flex items-center justify-center z-50 pointer-events-none no-lag"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>left: `${balloonPos.x}%`,<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>top: `${balloonPos.y}%`,</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>transform: 'translate(-50%, -50%) rotate(-10deg)',</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute -bottom-3 w-3 h-5 bg-purple-600"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="grid grid-cols-4 gap-1 p-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{Array.from({length: charge}).map((_, i) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={`b-${i}`} className="w-4 h-4 rounded-full bg-yellow-300 text-[8px] flex items-center justify-center font-bold select-none"&gt;-&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>{subStage === 'wall' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="mt-6 animate-bounce"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={onComplete} className="bg-green-500 hover:bg-green-600 text-xl px-8 py-3"&gt;Finish Experiments &amp;rarr;&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>);</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">// --- STAGE 6: Daily Life Simulations ---</p>
<p class="p1">const DailyLife = ({ onComplete, settings }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [level, setLevel] = useState(null);<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [sockPos, setSockPos] = useState(0);<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [cloudCharge, setCloudCharge] = useState(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [strike, setStrike] = useState(false);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// Door knob state</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [personX, setPersonX] = useState(10);<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [personCharge, setPersonCharge] = useState(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [zap, setZap] = useState(false);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const draggingRef = useRef(false);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const resetLevel = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setSockPos(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setPersonX(10);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setPersonCharge(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setZap(false);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setCloudCharge(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setStrike(false);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const renderMenu = () =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="grid grid-cols-1 md:grid-cols-3 gap-6 w-full animate-fadeIn"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{[</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{id: 'laundry', t: 'Sticky Laundry', i: 'ðŸ‘•'},</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{id: 'doorknob', t: 'The Door Knob', i: 'ðŸšª'},</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{id: 'lightning', t: 'Lightning Storm', i: 'âš¡'}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>].map(l =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button key={l.id} onClick={() =&gt; { resetLevel(); setLevel(l.id); }} className="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all border-t-8 border-blue-400 hover:-translate-y-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-6xl mb-4"&gt;{l.i}&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 className="font-bold text-xl"&gt;{l.t}&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="md:col-span-3 text-center mt-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={onComplete} className="bg-purple-600 hover:bg-purple-700 text-xl px-10 py-3"&gt;Take the Quiz! &amp;rarr;&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const getSparkleMsg = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (!level) return "Static electricity is everywhere! Pick a scenario to explore.";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (level === 'laundry') return "Clothes rubbing together in the dryer transfer electrons. Pull the sock off the shirt!";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (level === 'doorknob') return "Drag the person left and right to scrub their feet on the carpet. When you're fully charged, touch the knob to ZAP!";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (level === 'lightning') return "Clouds are just big static machines! Rub them together to make lightning.";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="flex flex-col items-center w-full max-w-4xl mx-auto p-4 animate-fadeIn"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;h2 className="text-3xl font-bold text-blue-600 mb-6"&gt;Daily Life Examples&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;Sparkle message={getSparkleMsg()} emotion={zap || strike ? 'shocked' : 'happy'} speak={settings.speak} /&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{!level &amp;&amp; renderMenu()}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{level === 'laundry' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-full bg-white p-8 rounded-xl shadow-xl flex flex-col items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="relative w-64 h-64 bg-gray-100 rounded-lg border-2 border-gray-200 flex items-center justify-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-32 h-40 bg-blue-500 rounded flex items-center justify-center text-white relative"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>Shirt</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{sockPos &lt; 80 &amp;&amp; sockPos &gt; 10 &amp;&amp; &lt;div className="absolute right-0 top-1/2 text-yellow-400 text-2xl font-bold animate-pulse"&gt;âš¡&lt;/div&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute w-16 h-24 bg-red-400 rounded-b-full flex items-center justify-center text-white cursor-grab active:cursor-grabbing transition-transform duration-75"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>transform: `translateX(${sockPos}px) rotate(${sockPos/2}deg)`,</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>left: '50%'<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>onMouseDown={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const startX = e.clientX;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const onMove = (mv) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const diff = Math.max(0, Math.min(150, mv.clientX - startX));</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setSockPos(diff);</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (Math.random() &gt; 0.9 &amp;&amp; settings.sound) playSound('rub');</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>};</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const onUp = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>document.removeEventListener('mousemove', onMove);</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>document.removeEventListener('mouseup', onUp);</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (sockPos &lt; 100) setSockPos(0);<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>else playSound('pop');</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>};</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>document.addEventListener('mousemove', onMove);</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>document.addEventListener('mouseup', onUp);</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>Sock</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{sockPos &gt;= 100 &amp;&amp; &lt;div className="text-green-600 font-bold mt-4 animate-bounce"&gt;POP! Static Release!&lt;/div&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; setLevel(null)} className="mt-6"&gt;Back&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{level === 'doorknob' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-full bg-white p-8 rounded-xl shadow-xl flex flex-col items-center select-none"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>onMouseUp={() =&gt; draggingRef.current = false}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>onMouseLeave={() =&gt; draggingRef.current = false}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-full h-80 relative bg-purple-50 rounded-lg border-b-8 border-yellow-700 overflow-hidden"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>onMouseMove={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (!draggingRef.current) return;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const rect = e.currentTarget.getBoundingClientRect();</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const x = ((e.clientX - rect.left) / rect.width) * 100;</p>
<p class="p2"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const delta = Math.abs(x - personX);</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (delta &gt; 0.5) {</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setPersonCharge(c =&gt; Math.min(100, c + 1));</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (settings.sound &amp;&amp; Math.random() &gt; 0.8) playSound('rub');</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p2"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setPersonX(Math.max(5, Math.min(80, x)));</p>
<p class="p2"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (x &gt; 75 &amp;&amp; personCharge &gt; 50) {</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setZap(true);</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setPersonCharge(0);</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>draggingRef.current = false;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>playSound('zap');</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>onMouseDown={() =&gt; { if(!zap) draggingRef.current = true; }}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute bottom-0 w-full h-8 bg-yellow-800 opacity-20"<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{backgroundImage: 'repeating-linear-gradient(45deg, transparent, transparent 10px, #000 10px, #000 11px)'}}&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{personCharge &lt; 50 &amp;&amp; !zap &amp;&amp; &lt;div className="absolute top-4 left-1/2 -translate-x-1/2 text-gray-500 font-bold animate-pulse"&gt;&amp;larr; SCRUB FEET LEFT &amp; RIGHT &amp;rarr;&lt;/div&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{personCharge &gt;= 50 &amp;&amp; !zap &amp;&amp; &lt;div className="absolute top-4 left-1/2 -translate-x-1/2 text-red-500 font-bold animate-pulse"&gt;CHARGED! TOUCH THE KNOB! &amp;rarr;&lt;/div&gt;}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute right-0 top-1/3 w-8 h-24 bg-gray-300 rounded-l-lg border-l-2 border-gray-400 flex items-center justify-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-6 h-6 rounded-full bg-yellow-500 border-2 border-yellow-700 shadow-sm relative"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{zap &amp;&amp; &lt;div className="absolute -left-10 -top-10 text-6xl animate-ping"&gt;âš¡&lt;/div&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className={`absolute bottom-0 w-24 h-56 transition-transform duration-75 cursor-ew-resize`}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{ left: `${personX}%`, transform: 'translateX(-50%)' }}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute top-0 left-1/2 -translate-x-1/2 w-16 h-16 bg-blue-200 rounded-full border-2 border-blue-300 flex items-center justify-center text-2xl"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{zap ? 'ðŸ˜²' : 'ðŸ™‚'}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute top-16 left-1/2 -translate-x-1/2 w-12 h-24 bg-blue-500 rounded-lg"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute top-20 right-0 w-16 h-4 bg-blue-500 rounded-full origin-left rotate-[-10deg]"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute top-16 -right-5 w-6 h-6 bg-blue-200 rounded-full"&gt;&lt;/div&gt;<span class="Apple-converted-space">Â </span></p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className={`absolute bottom-0 left-2 w-4 h-16 bg-blue-700 ${draggingRef.current ? 'animate-bounce' : ''}`}&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className={`absolute bottom-0 right-2 w-4 h-16 bg-blue-700 ${draggingRef.current ? 'animate-bounce' : ''} animation-delay-100`}&gt;&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute inset-0 border-4 border-yellow-400 rounded-full opacity-0 transition-opacity duration-200"</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style={{ opacity: personCharge / 100 }}&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-full h-6 bg-gray-200 rounded-full mt-4 overflow-hidden border border-gray-300"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="h-full bg-gradient-to-r from-yellow-200 to-red-500 transition-all duration-100" style={{width: `${personCharge}%`}}&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-center text-sm font-bold text-gray-500 mt-1"&gt;STATIC CHARGE LEVEL&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; setLevel(null)} className="mt-6"&gt;Back&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{level === 'lightning' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-full bg-white p-8 rounded-xl shadow-xl flex flex-col items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="relative w-full h-64 bg-gray-800 rounded-xl overflow-hidden"<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>onMouseMove={(e) =&gt; {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if(e.buttons === 1 &amp;&amp; !strike) {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setCloudCharge(c =&gt; Math.min(100, c + 1));<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (settings.sound &amp;&amp; Math.random() &gt; 0.8) playSound('rub');</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if(cloudCharge &gt; 98) { setStrike(true); playSound('zap'); }</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{strike &amp;&amp; &lt;div className="absolute inset-0 bg-white animate-ping opacity-50"&gt;&lt;/div&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{strike &amp;&amp; (&lt;svg className="absolute inset-0 w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none"&gt;&lt;path d="M50 20 L40 50 L60 50 L30 90" stroke="yellow" strokeWidth="2" fill="none" className="animate-pulse" /&gt;&lt;/svg&gt;)}</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute top-10 left-1/2 -translate-x-1/2 w-40 h-20 bg-gray-400 rounded-full blur-sm opacity-80 cursor-grab active:cursor-grabbing"&gt;&lt;div className="absolute top-0 right-0 w-20 h-20 bg-gray-400 rounded-full -mt-8"&gt;&lt;/div&gt;&lt;div className="absolute top-0 left-0 w-20 h-20 bg-gray-400 rounded-full -mt-6"&gt;&lt;/div&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute bottom-0 w-full flex items-end justify-center gap-2 opacity-50"&gt;&lt;div className="w-8 h-10 bg-black"&gt;&lt;/div&gt;&lt;div className="w-10 h-20 bg-black"&gt;&lt;/div&gt;&lt;div className="w-6 h-8 bg-black"&gt;&lt;/div&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-64 h-4 bg-gray-700 rounded mt-4 overflow-hidden border border-gray-500"&gt;&lt;div className="h-full bg-yellow-400 transition-all duration-200" style={{width: `${cloudCharge}%`}}&gt;&lt;/div&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; setLevel(null)} className="mt-6"&gt;Back&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>);</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">// --- STAGE 7: Quiz ---</p>
<p class="p1">const QuizLevel = ({ onRestart, settings }) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [qIndex, setQIndex] = useState(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [score, setScore] = useState(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [showResult, setShowResult] = useState(false);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const [selected, setSelected] = useState(null);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const questions = [</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>q: "Where are electrons located in an atom?",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>o: ["Deep in the center", "On the outer shells", "Inside the protons", "They don't exist"],</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>a: 1,<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>f: [<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Not quite. The center (Nucleus) holds Protons and Neutrons. Electrons are on the outside!",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Correct! They fly around the outer shells, making them easy to move.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Protons are separate particles in the nucleus. Electrons orbit around them.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"They definitely exist! We just spent the whole lab playing with them!"</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>]</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>q: "What charge does an electron have?",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>o: ["Positive (+)", "Neutral (0)", "Negative (-)", "Spicy"],</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>a: 2,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>f: [</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Protons are Positive (+). Electrons are the opposite.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Neutrons are Neutral (0). Electrons have a charge.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Correct! Electrons are Negative (-).",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Haha, no! Electrons are shocking, not spicy!"</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>]</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>q: "How is static electricity created?",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>o: ["By cooling down atoms", "By friction (rubbing)", "By melting plastic", "By adding water"],</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>a: 1,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>f: [</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Temperature isn't the key here.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Correct! Friction (rubbing) knocks those loose outer electrons off one object and onto another.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Melting changes the state of matter, not the electrical charge.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Water conducts electricity, but it doesn't create static charge by itself."</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>]</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>q: "What happens when two objects have Opposite charges (+ and -)?",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>o: ["They Attract", "They Repel", "They Explode", "Nothing"],</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>a: 0,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>f: [</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Spot on! Opposites Attract! Positive pulls Negative.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Likes repel (++/--). Opposites do the reverse!",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Ideally not in this lab! They just pull together.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"There is definitely a force involved!"</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>]</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>q: "Why did the paper stick to the balloon?",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>o: ["The paper was magnetic", "Glue", "The balloon polarized the paper", "Magic"],</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>a: 2,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>f: [</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Paper isn't magnetic. Something electrical is happening.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"No glue involved! It's all static.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"Correct! The negative balloon pushed the paper's electrons away, creating a positive side that attracted to the balloon.",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>"It looks like magic, but it's Science!"</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>]</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const handleAnswer = (idx) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setSelected(idx);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (idx === questions[qIndex].a) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setScore(s =&gt; s + 1);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(settings.sound) playSound('success');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(settings.sound) playSound('fail');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const nextQuestion = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (qIndex &lt; questions.length - 1) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setQIndex(i =&gt; i + 1);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setSelected(null);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setShowResult(true);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if (showResult) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex flex-col items-center w-full max-w-4xl mx-auto p-8 bg-white rounded-xl shadow-xl animate-fadeIn mt-10"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Sparkle<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>message={score === 5 ? "WOW! A perfect score! You're a true Static Scientist!" : "Great effort! You've learned a lot today."}<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>emotion="excited"<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>speak={settings.speak}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h2 className="text-4xl font-bold text-blue-600 mb-4"&gt;Quiz Complete!&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-6xl font-bold mb-8"&gt;{score} / {questions.length}&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="bg-blue-50 p-6 rounded-xl text-left w-full mb-8 border-l-8 border-blue-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 className="text-2xl font-bold text-blue-800 mb-4"&gt;Mission Debrief: What We Learned&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;ul className="space-y-3 text-lg text-gray-700"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;li&gt;âš›ï¸ &lt;strong&gt;Atoms:&lt;/strong&gt; Protons (+) and Neutrons (0) are stuck in the nucleus. Electrons (-) fly on the outside.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;li&gt;âš¡ &lt;strong&gt;Static Charge:&lt;/strong&gt; Friction (rubbing) steals those loose outer electrons.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;li&gt;ðŸ§² &lt;strong&gt;The Golden Rule:&lt;/strong&gt; Opposites Attract (+ and -), Likes Repel (- and -).&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;li&gt;ðŸŒ &lt;strong&gt;Real Life:&lt;/strong&gt; Lightning, doorknob shocks, and sticky laundry are all static electricity in action!&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/ul&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={onRestart} className="px-8 py-4 text-xl bg-purple-600"&gt;Restart Simulation&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const q = questions[qIndex];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="flex flex-col items-center w-full max-w-2xl mx-auto p-4 animate-fadeIn mt-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;h2 className="text-2xl font-bold text-purple-600 mb-6"&gt;Review Quiz&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;Sparkle<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>message={selected !== null ? (selected === q.a ? "You got it! " + q.f[selected] : "Oops! " + q.f[selected]) : q.q}<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>speak={settings.speak}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>emotion={selected !== null &amp;&amp; selected !== q.a ? 'shocked' : 'happy'}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-full bg-white p-6 rounded-xl shadow-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between text-sm text-gray-500 mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span&gt;Question {qIndex + 1} of {questions.length}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span&gt;Score: {score}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="space-y-3 mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{q.o.map((opt, i) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>key={i}<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>onClick={() =&gt; selected === null &amp;&amp; handleAnswer(i)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>disabled={selected !== null}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>className={`w-full p-4 rounded-lg text-left font-medium transition-colors border-2<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${selected === null ? 'bg-gray-50 border-gray-200 hover:bg-blue-50 hover:border-blue-300' :<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>i === q.a ? 'bg-green-100 border-green-500 text-green-800' :<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>selected === i ? 'bg-red-100 border-red-500 text-red-800' : 'bg-gray-50 border-gray-200 opacity-50'</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{opt}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{selected !== null &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="animate-fadeIn"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className={`p-4 rounded-lg mb-4 text-sm font-bold ${selected === q.a ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{q.f[selected]} {selected !== q.a &amp;&amp; &lt;span className="block mt-1"&gt;The correct answer is: {q.o[q.a]}&lt;/span&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={nextQuestion}&gt;Next &amp;rarr;&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>);</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">// --- Main App Controller ---</p>
<p class="p1">const App = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [stage, setStage] = useState(0);<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [showCredits, setShowCredits] = useState(false);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const [settings, setSettings] = useState({ sound: true, speak: true });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>const toggleSound = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>setSettings(s =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const newSound = !s.sound;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>toggleMusic(newSound); // Toggle music with sound</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>return {...s, sound: newSound, speak: newSound};</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// Ensure music stops if unmounted or sound off initially</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>return () =&gt; toggleMusic(false);</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>}, []);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div className="min-h-screen pb-12 flex flex-col relative"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;GlobalStyles /&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>{/* Header */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;header className="bg-blue-600 text-white p-4 shadow-md sticky top-0 z-50 flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="max-w-4xl flex-col items-start gap-0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div className="flex items-center gap-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;h1 className="text-xl md:text-2xl font-bold flex items-center gap-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>âš¡ Sparkle's Static Lab</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-sm font-light hidden sm:block"&gt;| Grade 5 Science&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div className="relative ml-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>onClick={() =&gt; setShowCredits(!showCredits)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>className="flex items-center gap-1 text-xs text-blue-200 hover:text-white transition-colors"</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span className="w-4 h-4 rounded-full border border-current flex items-center justify-center font-bold text-[10px]"&gt;i&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span&gt;Info&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{showCredits &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute left-0 top-6 bg-white text-gray-800 p-4 rounded shadow-xl w-64 text-sm z-50 border border-gray-200 animate-fadeIn text-left"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p className="font-bold mb-1"&gt;Created by:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;Sir Angelo Medez&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p className="text-xs text-gray-500 mt-2"&gt;via Gemini Canvas&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="flex gap-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{/* Sound Toggle */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>onClick={toggleSound}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>className="w-8 h-8 rounded-full bg-white/20 hover:bg-white/40 flex items-center justify-center font-bold text-lg transition-colors"</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>title="Toggle Sound/Voice"</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{settings.speak ? 'ðŸ”Š' : 'ðŸ”‡'}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;/header&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;main className="container mx-auto mt-6 px-2 flex-grow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{/* Progress Bar */}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div className="max-w-xl mx-auto mb-8 flex justify-between items-center px-4 relative"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div className="absolute left-0 right-0 top-1/2 h-1 bg-gray-300 -z-10"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>{['Atom', 'Shells', 'Forces', 'Comb', 'Balloon', 'Daily', 'Quiz'].map((label, idx) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>const s = idx + 1;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={s} className="flex flex-col items-center z-10"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold transition-colors duration-500 ${stage &gt;= s ? 'bg-blue-600 text-white' : 'bg-gray-300 text-gray-500'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{s}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span className="text-[10px] sm:text-xs mt-1 text-gray-500 hidden sm:block"&gt;{label}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>})}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{stage === 0 &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div className="text-center mt-12 animate-fadeIn flex flex-col items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;h1 className="text-4xl md:text-6xl font-bold text-blue-800 mb-6 floating"&gt;Hello, Lasallian Scientists!&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;p className="text-2xl text-purple-600 font-bold mb-4"&gt;Welcome to the Static Lab.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;Sparkle message="Hi! I'm Sparkle! I'll be your guide today as we explore the shocking world of static electricity!" speak={settings.speak} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="max-w-md mx-auto text-left bg-white p-6 rounded-lg shadow-md mb-8 space-y-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p className="text-lg font-bold text-gray-700"&gt;Your Mission:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;ol className="list-decimal pl-5 text-gray-600 space-y-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;li&gt;&lt;strong&gt;Build an Atom:&lt;/strong&gt; Learn the parts.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;li&gt;&lt;strong&gt;Explore Shells:&lt;/strong&gt; See why electrons move.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;li&gt;&lt;strong&gt;Master Forces:&lt;/strong&gt; Discover how charges attract and repel.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;li&gt;&lt;strong&gt;Charge Objects:&lt;/strong&gt; Use friction to steal electrons.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;li&gt;&lt;strong&gt;Perform Magic:&lt;/strong&gt; Roll cans, lift paper, and stick balloons!&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/ol&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;Button onClick={() =&gt; { setStage(1); toggleMusic(settings.sound); }} className="text-2xl px-10 py-4 shadow-xl bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600"&gt;Start Lab&lt;/Button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{stage === 1 &amp;&amp; &lt;AtomBuilder onComplete={() =&gt; setStage(2)} settings={settings} /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{stage === 2 &amp;&amp; &lt;ElectronShellLevel onComplete={() =&gt; setStage(3)} settings={settings} /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{stage === 3 &amp;&amp; &lt;ChargesLevel onComplete={() =&gt; setStage(4)} settings={settings} /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{stage === 4 &amp;&amp; &lt;CombLab onComplete={() =&gt; setStage(5)} settings={settings} /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{stage === 5 &amp;&amp; &lt;BalloonLab onComplete={() =&gt; setStage(6)} settings={settings} /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{stage === 6 &amp;&amp; &lt;DailyLife onComplete={() =&gt; setStage(7)} settings={settings} /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{stage === 7 &amp;&amp; &lt;QuizLevel onRestart={() =&gt; setStage(0)} settings={settings} /&gt;}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>&lt;/main&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>);</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">export default App;</p>
</body>
</html>
